"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react"),n=require("downshift"),r=e(require("match-sorter")),a=e(require("react-highlight-words")),l=e(require("react-use/lib/useDeepCompareEffect")),o=require("@chakra-ui/form-control"),i=require("@chakra-ui/layout"),s=require("@chakra-ui/button"),u=require("@chakra-ui/input"),c=require("@chakra-ui/icons"),p=require("@chakra-ui/tag");function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){return r(e,t,{keys:["value","label"]})}exports.CUIAutoComplete=function(e){var r=e.items,b=e.optionFilterFunc,h=void 0===b?m:b,d=e.itemRenderer,I=e.highlightItemBg,f=void 0===I?"gray.100":I,y=e.placeholder,x=e.label,C=e.listStyleProps,S=e.labelStyleProps,P=e.inputStyleProps,E=e.toggleButtonStyleProps,v=e.tagStyleProps,k=e.selectedIconProps,O=e.listItemStyleProps,w=e.onCreateItem,j=e.icon,B=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)t.indexOf(n=l[r])>=0||(a[n]=e[n]);return a}(e,["items","optionFilterFunc","itemRenderer","highlightItemBg","placeholder","label","listStyleProps","labelStyleProps","inputStyleProps","toggleButtonStyleProps","tagStyleProps","selectedIconProps","listItemStyleProps","onCreateItem","icon"]),T=t.useState(!1),q=T[0],F=T[1],L=t.useState(""),R=L[0],V=L[1],D=t.useState(r),M=D[0],W=D[1],A=t.useRef(null),H=n.useMultipleSelection(B),K=H.getSelectedItemProps,_=H.getDropdownProps,U=H.addSelectedItem,z=H.removeSelectedItem,G=H.selectedItems,J=G.map((function(e){return e.value})),N=n.useCombobox({inputValue:R,selectedItem:void 0,items:M,onInputValueChange:function(e){var t=e.selectedItem,n=h(r,e.inputValue||"");q&&n.length>0&&F(!1),t||W(n)},stateReducer:function(e,t){var r=t.changes;switch(t.type){case n.useCombobox.stateChangeTypes.InputBlur:return g({},r,{isOpen:!1});case n.useCombobox.stateChangeTypes.InputKeyDownEnter:case n.useCombobox.stateChangeTypes.ItemClick:return g({},r,{highlightedIndex:e.highlightedIndex,inputValue:R,isOpen:!0});case n.useCombobox.stateChangeTypes.FunctionSelectItem:return g({},r,{inputValue:R});default:return r}},onStateChange:function(e){var t=e.inputValue,a=e.selectedItem;switch(e.type){case n.useCombobox.stateChangeTypes.InputChange:V(t||"");break;case n.useCombobox.stateChangeTypes.InputKeyDownEnter:case n.useCombobox.stateChangeTypes.ItemClick:a&&(J.includes(a.value)?z(a):w&&q?(w(a),F(!1),W(r),V("")):U(a),ae(null))}}}),Q=N.isOpen,X=N.getToggleButtonProps,Y=N.getLabelProps,Z=N.getMenuProps,$=N.getInputProps,ee=N.getComboboxProps,te=N.highlightedIndex,ne=N.getItemProps,re=N.openMenu,ae=N.selectItem,le=N.setHighlightedIndex;return t.useEffect((function(){0===M.length&&(F(!0),W([{label:""+R,value:R}]),le(0))}),[M,F,le,R]),l((function(){W(r)}),[r]),t.createElement(i.Stack,null,t.createElement(o.FormLabel,Object.assign({},g({},S,Y({}))),x),G&&t.createElement(i.Stack,{spacing:2,isInline:!0,flexWrap:"wrap"},G.map((function(e,n){return t.createElement(p.Tag,Object.assign({mb:1},v,{key:"selected-item-"+n},K({selectedItem:e,index:n})),t.createElement(p.TagLabel,null,e.label),t.createElement(p.TagCloseButton,{onClick:function(t){t.stopPropagation(),z(e)},"aria-label":"Remove menu selection badge"}))}))),t.createElement(i.Stack,Object.assign({isInline:!0},ee()),t.createElement(u.Input,Object.assign({},P,$(_({placeholder:y,onClick:Q?function(){}:re,onFocus:Q?function(){}:re,ref:A})))),t.createElement(s.Button,Object.assign({},E,X(),{"aria-label":"toggle menu"}),t.createElement(c.ArrowDownIcon,null))),t.createElement(i.Box,{pb:4,mb:4},t.createElement(i.List,Object.assign({bg:"white",borderRadius:"4px",border:Q&&"1px solid rgba(0,0,0,0.1)",boxShadow:"6px 5px 8px rgba(0,50,30,0.02)"},C,Z()),Q&&M.map((function(e,n){return t.createElement(i.ListItem,Object.assign({px:2,py:1,borderBottom:"1px solid rgba(0,0,0,0.01)"},O,{bg:te===n?f:"inherit",key:""+e.value+n},ne({item:e,index:n})),q?t.createElement(i.Text,null,t.createElement(i.Box,{as:"span"},"Create")," ",t.createElement(i.Box,{as:"span",bg:"yellow.300",fontWeight:"bold"},'"',e.label,'"')):t.createElement(i.Box,{display:"inline-flex",alignItems:"center"},J.includes(e.value)&&t.createElement(i.ListIcon,Object.assign({as:j||c.CheckCircleIcon,color:"green.500",role:"img",display:"inline","aria-label":"Selected"},k)),d?d(e):t.createElement(a,{autoEscape:!0,searchWords:[R||""],textToHighlight:(r=e,r.label)})));var r})))))};
//# sourceMappingURL=chakra-ui-autocomplete.cjs.production.min.js.map
