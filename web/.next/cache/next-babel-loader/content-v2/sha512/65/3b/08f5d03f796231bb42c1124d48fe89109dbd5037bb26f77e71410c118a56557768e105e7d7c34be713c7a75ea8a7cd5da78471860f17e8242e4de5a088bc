{"ast":null,"code":"import { ApolloClient, InMemoryCache } from '@apollo/client';\n// this import is for forwarding the cookie\nimport { createWithApollo } from './createWithApollo';\n\nvar createClient = function createClient(ctx) {\n  var _ctx$req;\n\n  return new ApolloClient({\n    uri: 'http://localhost:4000/graphql',\n    credentials: 'include',\n    //Apollo Client can include user credentials (basic auth, cookies, etc.) in the HTTP requests it makes to a GraphQL server. By default, credentials are included only if the server is hosted at the same origin as the application using Apollo Client.also, set credentials to true in cors package in express\n    headers: {\n      cookie: (false ? ctx === null || ctx === void 0 ? void 0 : (_ctx$req = ctx.req) === null || _ctx$req === void 0 ? void 0 : _ctx$req.headers.cookie : undefined) || ''\n    },\n    cache: new InMemoryCache()\n  });\n};\n\nexport var withApollo = createWithApollo(createClient); //keyArgs - []: Specifying this array can help reduce the amount of duplicate data in your cache.\n//By default, the cache stores a separate value for every unique combination of argument values you provide when querying a particular field. When you specify a field's key arguments, the cache understands that any non-key arguments don't affect that field's value\n// Consequently, if you execute two different queries with the monthForNumber field, passing the same number argument but different accessToken arguments, the second query response will overwrite the first, because both invocations use the exact same value for all key arguments.","map":{"version":3,"sources":["/home/shriram/Downloads/slack clone/web/src/utils/withApollo.ts"],"names":["ApolloClient","InMemoryCache","createWithApollo","createClient","ctx","uri","credentials","headers","cookie","req","undefined","cache","withApollo"],"mappings":"AAAA,SAASA,YAAT,EAAuBC,aAAvB,QAA4C,gBAA5C;AAEA;AACA,SAASC,gBAAT,QAAiC,oBAAjC;;AAEA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,GAAD;AAAA;;AAAA,SACnB,IAAIJ,YAAJ,CAAiB;AACfK,IAAAA,GAAG,EAAE,+BADU;AAEfC,IAAAA,WAAW,EAAE,SAFE;AAES;AACxBC,IAAAA,OAAO,EAAE;AACPC,MAAAA,MAAM,EACJ,CAAC,QACGJ,GADH,aACGA,GADH,mCACGA,GAAG,CAAEK,GADR,6CACG,SAAUF,OAAV,CAAkBC,MADrB,GAEGE,SAFJ,KAEkB;AAJb,KAHM;AASfC,IAAAA,KAAK,EAAE,IAAIV,aAAJ;AATQ,GAAjB,CADmB;AAAA,CAArB;;AAaA,OAAO,IAAMW,UAAU,GAAGV,gBAAgB,CAACC,YAAD,CAAnC,C,CACP;AAEA;AACA","sourcesContent":["import { ApolloClient, InMemoryCache } from '@apollo/client'\nimport { NextPageContext } from 'next'\n// this import is for forwarding the cookie\nimport { createWithApollo } from './createWithApollo'\n\nconst createClient = (ctx: NextPageContext) =>\n  new ApolloClient({\n    uri: 'http://localhost:4000/graphql',\n    credentials: 'include', //Apollo Client can include user credentials (basic auth, cookies, etc.) in the HTTP requests it makes to a GraphQL server. By default, credentials are included only if the server is hosted at the same origin as the application using Apollo Client.also, set credentials to true in cors package in express\n    headers: {\n      cookie:\n        (typeof window === 'undefined'\n          ? ctx?.req?.headers.cookie\n          : undefined) || '',\n    },\n    cache: new InMemoryCache(),\n  })\n\nexport const withApollo = createWithApollo(createClient)\n//keyArgs - []: Specifying this array can help reduce the amount of duplicate data in your cache.\n\n//By default, the cache stores a separate value for every unique combination of argument values you provide when querying a particular field. When you specify a field's key arguments, the cache understands that any non-key arguments don't affect that field's value\n// Consequently, if you execute two different queries with the monthForNumber field, passing the same number argument but different accessToken arguments, the second query response will overwrite the first, because both invocations use the exact same value for all key arguments.\n"]},"metadata":{},"sourceType":"module"}